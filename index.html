<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
	<head>
		<title>paymemo</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.js" type="text/javascript"></script>
		<script type="text/javascript">
			$(function(){
				$('.paymemo').each(function(){
					var e = this;
					var db = $(e).attr('id');
					$(e).children('h2').text(db);
					$(e).children('form').attr('action','paymemo.cgi');
					$(e).children('form').children('input[name=db]').attr('value',db);
					$.getJSON('paymemo.cgi?db='+db,function(json){
						var table = $(e).children('table');
						table.append('<caption>Total: '+json['total']+'</caption>');
						jQuery.each(json['list'],function(){
							table.append('<tr><th>'+this[0]+'</th><td>'+this[1]+'</td></tr>');
						});
					});
				});
			});
		</script>
	</head>
	<body>
		<h1>PayMemo</h1>

		<div class="paymemo" id="sample">
			<h2></h2>
			<form method="post" action="">
				<input name="item" size="30" />
				<input name="amount" size="6" />
				<input name="db" type="hidden" value="" />
				<input type="submit" value="+" />
			</form>
			<table></table>
		</div>

	</body>
</html>
